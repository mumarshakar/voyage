{%- liquid
  if section.id
    assign footer_settings = section.settings
  else
    if sections['footer'].id
      assign footer_settings = sections['footer'].settings
    elsif sections.footer.id
      assign footer_settings = sections.footer.settings
    endif
  endif

  comment
    Set default values if footer_settings is not available
  endcomment
  if footer_settings == blank
    assign footer_bg_color = '#6B4C93'
    assign footer_text_color = '#FFFFFF'
    assign footer_link_color = '#FFFFFF'
    assign footer_link_hover_color = '#FFFFFF'
    assign footer_link_font_size = 14
    assign footer_link_font_weight = '400'
    assign footer_vertical_padding = 60
    assign columns_desktop = 3
    assign columns_tablet = 2
    assign columns_mobile = 1
    assign social_heading = 'Follow us'
    assign newsletter_heading = 'Subscribe to newsletter'
    assign newsletter_button_text = 'SIGN UP'
    assign newsletter_button_color = '#FFD700'
    assign newsletter_button_text_color = '#FFFFFF'
  else
    assign footer_bg_color = footer_settings.footer_bg_color | default: '#6B4C93'
    assign footer_text_color = footer_settings.footer_text_color | default: '#FFFFFF'
    assign footer_link_color = footer_settings.footer_link_color | default: '#FFFFFF'
    assign footer_link_hover_color = footer_settings.footer_link_hover_color | default: '#FFFFFF'
    assign footer_link_font_size = footer_settings.footer_link_font_size | default: 14
    assign footer_link_font_weight = footer_settings.footer_link_font_weight | default: '400'
    assign footer_vertical_padding = footer_settings.footer_vertical_padding | default: 60
    assign columns_desktop = footer_settings.columns_desktop | default: 3
    assign columns_tablet = footer_settings.columns_tablet | default: 2
    assign columns_mobile = footer_settings.columns_mobile | default: 1
    assign social_heading = footer_settings.social_heading | default: 'Follow us'
    assign newsletter_heading = footer_settings.newsletter_heading | default: 'Subscribe to newsletter'
    assign newsletter_button_text = footer_settings.newsletter_button_text | default: 'SIGN UP'
    assign newsletter_button_color = footer_settings.newsletter_button_color | default: '#FFD700'
    assign newsletter_button_text_color = footer_settings.newsletter_button_text_color | default: '#FFFFFF'
  endif

  comment
    Count social media blocks
  endcomment
  assign social_blocks_count = 0
  if section.blocks != blank
    for block in section.blocks
      if block.type == 'social_media'
        assign block_url = block.settings.social_url
        if block_url != blank
          assign social_blocks_count = social_blocks_count | plus: 1
        endif
      endif
    endfor
  endif
-%}

<footer class="custom-footer" style="background-color: {{ footer_bg_color }}; padding: {{ footer_vertical_padding }}px 20px;">
  <div class="container">
    <div class="row g-4">
      <!-- Social Media Section -->
      <div class="col-12 col-md-{{ 12 | divided_by: columns_tablet }} col-lg-{{ 12 | divided_by: columns_desktop }} footer-section">
        {% if social_heading != blank %}
          <h5 class="footer-heading" style="color: {{ footer_text_color }}; font-size: {{ footer_settings.social_heading_font_size | default: 18 }}px; font-weight: {{ footer_settings.social_heading_font_weight | default: '600' }}; margin-bottom: 20px;">
            {{ social_heading }}
          </h5>
        {% endif %}
        
        {% if social_blocks_count > 0 %}
          <div class="social-icons-wrapper">
            {% if section.blocks != blank and section.blocks.size > 0 %}
              {% for block in section.blocks %}
                {% if block.type == 'social_media' %}
                  {%- liquid
                    assign platform = block.settings.platform | default: 'instagram'
                    assign social_url = block.settings.social_url
                    
                    comment
                      Define platform colors for square icons
                    endcomment
                    case platform
                      when 'whatsapp'
                        assign platform_color = '#25D366'
                      when 'facebook'
                        assign platform_color = '#1877F2'
                      when 'instagram'
                        assign platform_color = '#E4405F'
                      when 'youtube'
                        assign platform_color = '#FF0000'
                      when 'twitter'
                        assign platform_color = '#1DA1F2'
                      when 'tiktok'
                        assign platform_color = '#000000'
                      when 'linkedin'
                        assign platform_color = '#0077B5'
                      when 'pinterest'
                        assign platform_color = '#BD081C'
                      when 'snapchat'
                        assign platform_color = '#FFFC00'
                      else
                        assign platform_color = '#6B4C93'
                    endcase
                  -%}
                  
                  {% if social_url != blank %}
                    <a href="{{ social_url }}" 
                       target="_blank" 
                       rel="noopener noreferrer"
                       class="social-icon-square"
                       style="background-color: {{ platform_color }};"
                       aria-label="Visit our {{ platform | capitalize }} profile">
                      {%- liquid
                        case platform
                          when 'whatsapp'
                            assign icon_svg = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>'
                          when 'facebook'
                            assign icon_svg = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>'
                          when 'instagram'
                            assign icon_svg = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>'
                          when 'youtube'
                            assign icon_svg = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>'
                          else
                            assign icon_svg = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="white"><circle cx="12" cy="12" r="10"/></svg>'
                        endcase
                      -%}
                      <span class="social-icon-inner">{{ icon_svg }}</span>
                    </a>
                  {% endif %}
                {% endif %}
              {% endfor %}
            {% endif %}
          </div>
        {% endif %}
      </div>

      <!-- Newsletter Section -->
      <div class="col-12 col-md-{{ 12 | divided_by: columns_tablet }} col-lg-{{ 12 | divided_by: columns_desktop }} footer-section">
        {% if newsletter_heading != blank %}
          <h5 class="footer-heading" style="color: {{ footer_text_color }}; font-size: {{ footer_settings.newsletter_heading_font_size | default: 18 }}px; font-weight: {{ footer_settings.newsletter_heading_font_weight | default: '600' }}; margin-bottom: 20px;">
            {{ newsletter_heading }}
          </h5>
        {% endif %}
        
        <form class="newsletter-form" action="{{ routes.cart_url }}" method="post" enctype="multipart/form-data">
          <div class="newsletter-input-group">
            <input type="email" 
                   name="contact[email]" 
                   placeholder="Your e-mail address" 
                   class="newsletter-input"
                   style="background-color: #FFFFFF; color: #333333; border-radius: 4px; padding: 12px 16px; border: none; flex: 1;"
                   required>
            <button type="submit" 
                    class="newsletter-button"
                    style="background-color: {{ newsletter_button_color }}; color: {{ newsletter_button_text_color }}; border-radius: 4px; padding: 12px 24px; border: none; font-weight: 600; text-transform: uppercase; white-space: nowrap; margin-left: 8px;">
              {{ newsletter_button_text }}
            </button>
          </div>
        </form>
      </div>

      <!-- Navigation Links Section -->
      <div class="col-12 col-md-{{ 12 | divided_by: columns_tablet }} col-lg-{{ 12 | divided_by: columns_desktop }} footer-section">
        <div class="footer-links-wrapper">
          <div class="footer-links-column">
            {% if linklists.footer.links.size > 0 %}
              {% assign total_links = linklists.footer.links.size %}
              {% assign half_links = total_links | divided_by: 2 | ceil %}
              {% for link in linklists.footer.links limit: half_links %}
                <a href="{{ link.url }}" 
                   class="footer-link"
                   style="color: {{ footer_link_color }}; font-size: {{ footer_link_font_size }}px; font-weight: {{ footer_link_font_weight }}; text-decoration: none; display: block; margin-bottom: 12px;">
                  {{ link.title | upcase }}
                </a>
              {% endfor %}
            {% else %}
              <a href="/pages/about-us" class="footer-link" style="color: {{ footer_link_color }}; font-size: {{ footer_link_font_size }}px; font-weight: {{ footer_link_font_weight }}; text-decoration: none; display: block; margin-bottom: 12px;">ABOUT US</a>
              <a href="/pages/contact-us" class="footer-link" style="color: {{ footer_link_color }}; font-size: {{ footer_link_font_size }}px; font-weight: {{ footer_link_font_weight }}; text-decoration: none; display: block; margin-bottom: 12px;">CONTACT US</a>
              <a href="/pages/privacy" class="footer-link" style="color: {{ footer_link_color }}; font-size: {{ footer_link_font_size }}px; font-weight: {{ footer_link_font_weight }}; text-decoration: none; display: block; margin-bottom: 12px;">PRIVACY</a>
              <a href="/pages/client-feedback" class="footer-link" style="color: {{ footer_link_color }}; font-size: {{ footer_link_font_size }}px; font-weight: {{ footer_link_font_weight }}; text-decoration: none; display: block; margin-bottom: 12px;">CLIENT FEEDBACK</a>
            {% endif %}
          </div>
          <div class="footer-links-column">
            {% if linklists.footer.links.size > 0 %}
              {% assign total_links = linklists.footer.links.size %}
              {% assign half_links = total_links | divided_by: 2 | ceil %}
              {% for link in linklists.footer.links offset: half_links %}
                <a href="{{ link.url }}" 
                   class="footer-link"
                   style="color: {{ footer_link_color }}; font-size: {{ footer_link_font_size }}px; font-weight: {{ footer_link_font_weight }}; text-decoration: none; display: block; margin-bottom: 12px;">
                  {{ link.title | upcase }}
                </a>
              {% endfor %}
            {% else %}
              <a href="/pages/blog" class="footer-link" style="color: {{ footer_link_color }}; font-size: {{ footer_link_font_size }}px; font-weight: {{ footer_link_font_weight }}; text-decoration: none; display: block; margin-bottom: 12px;">BLOG</a>
              <a href="/pages/delivery" class="footer-link" style="color: {{ footer_link_color }}; font-size: {{ footer_link_font_size }}px; font-weight: {{ footer_link_font_weight }}; text-decoration: none; display: block; margin-bottom: 12px;">DELIVERY</a>
              <a href="/pages/terms" class="footer-link" style="color: {{ footer_link_color }}; font-size: {{ footer_link_font_size }}px; font-weight: {{ footer_link_font_weight }}; text-decoration: none; display: block; margin-bottom: 12px;">T'S & C'S</a>
              <a href="/pages/size-guide" class="footer-link" style="color: {{ footer_link_color }}; font-size: {{ footer_link_font_size }}px; font-weight: {{ footer_link_font_weight }}; text-decoration: none; display: block; margin-bottom: 12px;">SIZE GUIDE</a>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

<style>
  .custom-footer {
    font-family: sans-serif;
    --footer-link-hover-color: {{ footer_link_hover_color }};
  }
  
  .footer-section {
    margin-bottom: 30px;
  }
  
  .footer-heading {
    font-family: sans-serif;
    text-transform: none;
  }
  
  .social-icons-wrapper {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
  }
  
  .social-icon-square {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    border-radius: 8px;
    text-decoration: none;
    transition: transform 0.2s ease, opacity 0.2s ease;
  }
  
  .social-icon-square:hover {
    transform: translateY(-2px);
    opacity: 0.9;
  }
  
  .social-icon-inner {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
  }
  
  .social-icon-inner svg {
    width: 100%;
    height: 100%;
  }
  
  .newsletter-form {
    margin-top: 10px;
  }
  
  .newsletter-input-group {
    display: flex;
    align-items: center;
  }
  
  .newsletter-input {
    font-size: 14px;
  }
  
  .newsletter-input::placeholder {
    color: #999999;
  }
  
  .newsletter-button {
    cursor: pointer;
    transition: opacity 0.2s ease;
  }
  
  .newsletter-button:hover {
    opacity: 0.9;
  }
  
  .footer-links-wrapper {
    display: flex;
    gap: 40px;
    flex-wrap: wrap;
  }
  
  .footer-links-column {
    display: flex;
    flex-direction: column;
  }
  
  .footer-link {
    transition: opacity 0.2s ease, color 0.2s ease;
  }
  
  .footer-link:hover {
    opacity: 0.8;
    color: var(--footer-link-hover-color) !important;
  }
  
  @media (max-width: 767px) {
    .newsletter-input-group {
      flex-direction: column;
    }
    
    .newsletter-button {
      margin-left: 0;
      margin-top: 8px;
      width: 100%;
    }
    
    .footer-links-wrapper {
      gap: 20px;
    }
    
    .social-icon-square {
      width: 40px;
      height: 40px;
    }
  }
</style>
