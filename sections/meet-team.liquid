{{ 'bootstrap.min.css' | asset_url | stylesheet_tag }}

<style>
.team-section {
  padding: 60px 0;
}

.team-title {
  text-align: center;
  margin-bottom: 40px;
}

.flip-card {
  background-color: transparent;
  perspective: 1000px;
}

.flip-card-inner {
  position: relative;
  width: 100%;
  height: 100%;
  text-align: center;
  transition: transform 0.6s;
  transform-style: preserve-3d;
}

.flip-card:hover .flip-card-inner {
  transform: rotateY(180deg);
}

.flip-card-front,
.flip-card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
}

.flip-card-front img {
  width: {{ section.settings.image_width }}px;
  height: {{ section.settings.image_height }}px;
  object-fit: cover;
  margin: 0 auto;
  display: block;
  border-radius: {{ section.settings.image_border_radius }}px {{ section.settings.image_border_radius }}px 0 0;
}

.flip-card-front {
  background: #fff;
  border-radius: {{ section.settings.image_border_radius }}px;
  padding-bottom: 20px;
}

.flip-card-back {
  background-color: {{ section.settings.back_color }};
  color: white;
  transform: rotateY(180deg);
  padding: 20px;
  border-radius: {{ section.settings.image_border_radius }}px;
}
</style>

<div class="team-section">
  <h2 class="team-title">{{ section.settings.title }}</h2>

  <div id="teamCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">

      {% assign counter = 0 %}
      {% for block in section.blocks %}
        {% if counter == 0 %}
          <div class="carousel-item {% if forloop.index0 == 0 %}active{% endif %}">
            <div class="container">
              <div class="row justify-content-center">
        {% endif %}

        <div class="col-md-4 text-center mb-4">
          <div class="flip-card">
            <div class="flip-card-inner">

              <!-- FRONT -->
              <div class="flip-card-front">
                <img 
                  src="{% if block.settings.image != blank %}{{ block.settings.image | image_url: width: 600 }}{% else %}https://via.placeholder.com/300x300{% endif %}" 
                  alt="{{ block.settings.name }}"
                >
                <h4>{{ block.settings.name }}</h4>
                <p>{{ block.settings.info }}</p>
              </div>

              <!-- BACK -->
              <div class="flip-card-back">
                <h4>{{ block.settings.name }}</h4>
                <p>{{ block.settings.back_info }}</p>
              </div>

            </div>
          </div>
        </div>

        {% assign counter = counter | plus: 1 %}

        {% if counter == 3 %}
              </div>
            </div>
          </div>
          {% assign counter = 0 %}
        {% endif %}

      {% endfor %}

      {% unless counter == 0 %}
            </div>
          </div>
        </div>
      {% endunless %}

    </div>

    <!-- Controls -->
    <button class="carousel-control-prev" type="button" data-bs-target="#teamCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#teamCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>

</div>

{% schema %}
{
  "name": "Meet the Team",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Meet Our Team"
    },
    {
      "type": "header",
      "content": "Image Settings"
    },
    {
      "type": "range",
      "id": "image_width",
      "min": 100,
      "max": 400,
      "step": 10,
      "unit": "px",
      "label": "Image Width (px)",
      "default": 300
    },
    {
      "type": "range",
      "id": "image_height",
      "min": 100,
      "max": 400,
      "step": 10,
      "unit": "px",
      "label": "Image Height (px)",
      "default": 300
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Image Border Radius",
      "default": 10
    },
    {
      "type": "color",
      "id": "back_color",
      "label": "Back Side Background",
      "default": "#000000"
    }
  ],
  "blocks": [
    {
      "type": "team_member",
      "name": "Team Member",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Team Member Image"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Name",
          "default": "John Doe"
        },
        {
          "type": "textarea",
          "id": "info",
          "label": "Front Side Info",
          "default": "Short description about the member"
        },
        {
          "type": "textarea",
          "id": "back_info",
          "label": "Back Side Info",
          "default": "Additional details shown on flip"
        }
      ]
    }
  ],
  "max_blocks": 15,
  "presets": [
    {
      "name": "Meet the Team"
    }
  ]
}
{% endschema %}
