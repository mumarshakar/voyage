{%- liquid
  assign heading_text = section.settings.heading
  assign card_height = section.settings.card_height | default: 360
  assign card_border_radius = section.settings.card_border_radius | default: 2
  assign image_border_radius = section.settings.image_border_radius | default: 2
  assign desktop_columns = section.settings.desktop_cards_per_row | default: '3'
  assign tablet_columns = section.settings.tablet_cards_per_row | default: '2'
  assign mobile_columns = section.settings.mobile_cards_per_row | default: '1'
  assign name_font_size = section.settings.name_font_size | default: 20
  assign name_line_height = section.settings.name_line_height | default: 1.2
  assign role_font_size = section.settings.role_font_size | default: 16
  assign role_line_height = section.settings.role_line_height | default: 1.4
  assign info_font_size = section.settings.info_font_size | default: 15
  assign info_line_height = section.settings.info_line_height | default: 1.5
-%}

{% stylesheet %}
.flip-card {
    background: transparent;
    width: 100%;
    height: var(--team-card-height, 340px);
    perspective: 1000px;
}

.flip-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.6s;
    transform-style: preserve-3d;
}

.flip-card:hover .flip-card-inner {
    transform: rotateY(180deg);
}

.flip-card-front, 
.flip-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: var(--team-card-radius, 2px);
    background: #ffffff;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

.flip-card-front img {
    display: block;
    width: 100%;
    height: calc(var(--team-card-height, 340px) * 0.8);
    object-fit: cover;
    border-radius: var(--team-image-radius, 2px);
}

.flip-card-front h5 {
    font-size: var(--team-name-font-size, 20px);
    line-height: var(--team-name-line-height, 1.2);
}

.flip-card-front p {
    font-size: var(--team-role-font-size, 16px);
    line-height: var(--team-role-line-height, 1.4);
}

.flip-card-back p {
    font-size: var(--team-info-font-size, 15px);
    line-height: var(--team-info-line-height, 1.5);
}

.flip-card-back {
    transform: rotateY(180deg);
    background: #f8f9fa;
    padding: 20px;
}

.team-grid {
    display: grid;
    gap: 24px;
    grid-template-columns: repeat(var(--team-desktop-columns, 3), minmax(0, 1fr));
}

@media (max-width: 1024px) {
    .team-grid {
        grid-template-columns: repeat(var(--team-tablet-columns, 2), minmax(0, 1fr));
    }
}

@media (max-width: 600px) {
    .team-grid {
        grid-template-columns: repeat(var(--team-mobile-columns, 1), minmax(0, 1fr));
    }
}
{% endstylesheet %}

<div class="container py-5"
     style="height:100vh;
            --team-card-height: {{ card_height }}px;
            --team-card-radius: {{ card_border_radius }}px;
            --team-image-radius: {{ image_border_radius }}px;
            --team-name-font-size: {{ name_font_size }}px;
            --team-name-line-height: {{ name_line_height }};
            --team-role-font-size: {{ role_font_size }}px;
            --team-role-line-height: {{ role_line_height }};
            --team-info-font-size: {{ info_font_size }}px;
            --team-info-line-height: {{ info_line_height }};
            --team-desktop-columns: {{ desktop_columns }};
            --team-tablet-columns: {{ tablet_columns }};
            --team-mobile-columns: {{ mobile_columns }};">
    <h2 class="text-center mb-5">{{ heading_text }}</h2>
      
    <div class="team-grid">

        {% for block in section.blocks %}
        <div class="team-grid-item" {{ block.shopify_attributes }}>
            <div class="flip-card">
                <div class="flip-card-inner">

                    <!-- Front -->
                    <div class="flip-card-front text-center">
                        {% if block.settings.image != blank %}
                            <img src="{{ block.settings.image | image_url: width: 600 }}" alt="{{ block.settings.name | escape }}">
                        {% else %}
                            <img src="https://via.placeholder.com/400x250" alt="placeholder">
                        {% endif %}

                        <h5 class="mt-3 mb-0"
                            style="font-size: {{ name_font_size }}px !important;
                                   line-height: {{ name_line_height }} !important;">
                            {{ block.settings.name }}
                        </h5>
                        <p class="text-muted"
                           style="font-size: {{ role_font_size }}px !important;
                                  line-height: {{ role_line_height }} !important;">
                            {{ block.settings.role }}
                        </p>
                    </div>

                    <!-- Back -->
                    <div class="flip-card-back d-flex align-items-center">
                        <p style="font-size: {{ info_font_size }}px !important;
                                 line-height: {{ info_line_height }} !important;">
                            {{ block.settings.description }}
                        </p>
                    </div>

                </div>
            </div>
        </div>
        {% endfor %}

    </div>
</div>

{% schema %}
{
  "name": "Team Flip Cards",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Meet Our Team"
    },
    {
      "type": "range",
      "id": "card_height",
      "label": "Card Height (px)",
      "min": 280,
      "max": 500,
      "step": 10,
      "default": 360
    },
    {
      "type": "select",
      "id": "desktop_cards_per_row",
      "label": "Cards Per Row (Desktop)",
      "options": [
        { "value": "1", "label": "1" },
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" },
        { "value": "4", "label": "4" }
      ],
      "default": "3"
    },
    {
      "type": "select",
      "id": "tablet_cards_per_row",
      "label": "Cards Per Row (Tablet)",
      "options": [
        { "value": "1", "label": "1" },
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" }
      ],
      "default": "2"
    },
    {
      "type": "select",
      "id": "mobile_cards_per_row",
      "label": "Cards Per Row (Mobile)",
      "options": [
        { "value": "1", "label": "1" },
        { "value": "2", "label": "2" }
      ],
      "default": "1"
    },
    {
      "type": "range",
      "id": "card_border_radius",
      "label": "Card Border Radius (px)",
      "min": 0,
      "max": 40,
      "step": 2,
      "default": 2
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "label": "Image Border Radius (px)",
      "min": 0,
      "max": 40,
      "step": 2,
      "default": 2
    },
    {
      "type": "range",
      "id": "name_font_size",
      "label": "Name Font Size (px)",
      "min": 12,
      "max": 36,
      "step": 1,
      "default": 20
    },
    {
      "type": "range",
      "id": "name_line_height",
      "label": "Name Line Height",
      "min": 1.0,
      "max": 2.0,
      "step": 0.1,
      "default": 1.2
    },
    {
      "type": "range",
      "id": "role_font_size",
      "label": "Designation Font Size (px)",
      "min": 10,
      "max": 28,
      "step": 1,
      "default": 16
    },
    {
      "type": "range",
      "id": "role_line_height",
      "label": "Designation Line Height",
      "min": 1.0,
      "max": 2.0,
      "step": 0.1,
      "default": 1.4
    },
    {
      "type": "range",
      "id": "info_font_size",
      "label": "Info Font Size (px)",
      "min": 10,
      "max": 24,
      "step": 1,
      "default": 15
    },
    {
      "type": "range",
      "id": "info_line_height",
      "label": "Info Line Height",
      "min": 1.0,
      "max": 2.0,
      "step": 0.1,
      "default": 1.5
    }
  ],
  "blocks": [
    {
      "type": "team_member",
      "name": "Team Member",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Photo"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Name",
          "default": "John Doe"
        },
        {
          "type": "text",
          "id": "role",
          "label": "Role",
          "default": "Senior Developer"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Team member bio goes here."
        }
      ]
    }
  ],
  "max_blocks": 12,
  "presets": [
    {
      "name": "Team Flip Cards",
      "category": "Team"
    }
  ]
}
{% endschema %}