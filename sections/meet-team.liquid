{% schema %}
{
  "name": "Meet Team",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Meet the Team"
    },
    {
      "type": "image_picker",
      "id": "team_image",
      "label": "Team Image",
      "info": "Upload a photo of your team"
    },
    {
      "type": "richtext",
      "id": "introduction_text",
      "label": "Introduction Text",
      "default": "<p>Add your team introduction here.</p>"
    },
    {
      "type": "richtext",
      "id": "quote_text",
      "label": "Quote/Philosophy Text",
      "default": "<p><em>Add your team philosophy or quote here.</em></p>",
      "info": "This text will be displayed in italic style"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image Position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left",
      "info": "Position of the image relative to text"
    },
    {
      "type": "checkbox",
      "id": "stack_on_mobile",
      "label": "Stack on Mobile",
      "default": true,
      "info": "Stack image and text vertically on mobile devices"
    },
    {
      "type": "header",
      "content": "Heading Styling"
    },
    {
      "type": "paragraph",
      "content": "All typography settings (font family, font size, font weight, line height, and color) are controlled from Theme Settings → Typography"
    },
    {
      "type": "select",
      "id": "heading_text_align",
      "label": "Heading Alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Text Content Styling"
    },
    {
      "type": "paragraph",
      "content": "Font family, font size, line height, and color are controlled from Theme Settings → Typography"
    },
    {
      "type": "header",
      "content": "Quote Text Styling"
    },
    {
      "type": "paragraph",
      "content": "Font family, font size, line height, and color are controlled from Theme Settings → Typography"
    },
    {
      "type": "select",
      "id": "quote_font_style",
      "label": "Quote Font Style",
      "options": [
        {
          "value": "italic",
          "label": "Italic"
        },
        {
          "value": "normal",
          "label": "Normal"
        }
      ],
      "default": "italic"
    },
    {
      "type": "header",
      "content": "Image Settings"
    },
    {
      "type": "select",
      "id": "image_fit",
      "label": "Image Fit",
      "options": [
        {
          "value": "cover",
          "label": "Cover"
        },
        {
          "value": "contain",
          "label": "Contain"
        }
      ],
      "default": "cover"
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "label": "Image Border Radius (px)",
      "min": 0,
      "max": 30,
      "step": 2,
      "default": 2,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "color",
      "id": "section_bg_color",
      "label": "Section Background Color",
      "default": "#EAE7E1"
    },
    {
      "type": "range",
      "id": "section_padding_top",
      "label": "Section Top Padding (px)",
      "min": 20,
      "max": 200,
      "step": 10,
      "default": 80,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "section_padding_bottom",
      "label": "Section Bottom Padding (px)",
      "min": 20,
      "max": 200,
      "step": 10,
      "default": 80,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "section_padding_horizontal",
      "label": "Section Horizontal Padding (px)",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 20,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "heading_margin_bottom",
      "label": "Heading Bottom Margin (px)",
      "min": 20,
      "max": 80,
      "step": 5,
      "default": 50,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "column_gap",
      "label": "Gap Between Image and Text (px)",
      "min": 20,
      "max": 100,
      "step": 5,
      "default": 40,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "text_spacing",
      "label": "Spacing Between Text Blocks (px)",
      "min": 10,
      "max": 50,
      "step": 5,
      "default": 20,
      "unit": "px"
    }
  ],
  "presets": [
    {
      "name": "Meet Team"
    }
  ]
}
{% endschema %}

{%- liquid
  assign heading = section.settings.heading | default: ''
  assign team_image = section.settings.team_image
  assign introduction_text = section.settings.introduction_text
  assign quote_text = section.settings.quote_text
  assign image_position = section.settings.image_position | default: 'left'
  assign stack_on_mobile = section.settings.stack_on_mobile
  # Use theme settings ONLY for typography (no section-level overrides)
  assign heading_color = settings.heading_color | default: '#333333'
  assign heading_font_size = settings.heading_font_size | default: 40
  assign heading_font_weight = settings.heading_font_weight | default: '600'
  assign heading_font_family_key = settings.heading_font_family | default: 'segoe'
  assign heading_text_align = section.settings.heading_text_align | default: 'center'
  assign text_color = settings.body_text_color | default: '#333333'
  assign text_font_size = settings.body_font_size | default: 16
  assign text_font_family_key = settings.body_font_family | default: 'segoe'
  assign text_line_height = settings.body_line_height | default: 1.6
  assign quote_color = settings.body_text_color | default: '#333333'
  assign quote_font_size = settings.body_font_size | default: 18
  assign quote_font_style = section.settings.quote_font_style | default: 'italic'
  assign image_fit = section.settings.image_fit | default: 'cover'
  assign image_border_radius = section.settings.image_border_radius | default: 2
  assign section_bg_color = section.settings.section_bg_color | default: '#EAE7E1'
  assign section_padding_top = section.settings.section_padding_top | default: 80
  assign section_padding_bottom = section.settings.section_padding_bottom | default: 80
  assign section_padding_horizontal = section.settings.section_padding_horizontal | default: 20
  assign heading_margin_bottom = section.settings.heading_margin_bottom | default: 50
  assign column_gap = section.settings.column_gap | default: 40
  assign text_spacing = section.settings.text_spacing | default: 20
  
  # Get font family values from theme settings
  case heading_font_family_key
    when 'playfair'
      assign heading_font_family_value = "'Playfair Display', 'Times New Roman', serif"
    when 'merriweather'
      assign heading_font_family_value = "'Merriweather', Georgia, serif"
    when 'georgia'
      assign heading_font_family_value = "Georgia, 'Times New Roman', serif"
    when 'times'
      assign heading_font_family_value = "'Times New Roman', Times, serif"
    when 'arial'
      assign heading_font_family_value = "Arial, Helvetica, sans-serif"
    when 'helvetica'
      assign heading_font_family_value = "Helvetica, Arial, sans-serif"
    when 'verdana'
      assign heading_font_family_value = "Verdana, Geneva, sans-serif"
    when 'courier'
      assign heading_font_family_value = "'Courier New', Courier, monospace"
    else
      assign heading_font_family_value = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"
  endcase

  case text_font_family_key
    when 'playfair'
      assign text_font_family_value = "'Playfair Display', 'Times New Roman', serif"
    when 'merriweather'
      assign text_font_family_value = "'Merriweather', Georgia, serif"
    when 'georgia'
      assign text_font_family_value = "Georgia, 'Times New Roman', serif"
    when 'times'
      assign text_font_family_value = "'Times New Roman', Times, serif"
    when 'arial'
      assign text_font_family_value = "Arial, Helvetica, sans-serif"
    when 'helvetica'
      assign text_font_family_value = "Helvetica, Arial, sans-serif"
    when 'verdana'
      assign text_font_family_value = "Verdana, Geneva, sans-serif"
    when 'courier'
      assign text_font_family_value = "'Courier New', Courier, monospace"
    else
      assign text_font_family_value = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"
  endcase
-%}

<section class="meet-team-section" 
         id="meet-team-{{ section.id }}"
         style="background-color: {{ section_bg_color }};
                padding-top: {{ section_padding_top }}px;
                padding-bottom: {{ section_padding_bottom }}px;
                padding-left: {{ section_padding_horizontal }}px;
                padding-right: {{ section_padding_horizontal }}px;">
  
  <div class="container">
    {% if heading != blank %}
      <h2 class="meet-team-heading" 
          style="color: {{ heading_color }};
                 font-size: {{ heading_font_size }}px;
                 font-weight: {{ heading_font_weight }};
                 font-family: {{ heading_font_family_value }};
                 text-align: {{ heading_text_align }};
                 margin-bottom: {{ heading_margin_bottom }}px;
                 margin-top: 0;">
        {{ heading }}
      </h2>
    {% endif %}
    
    <div class="meet-team-content {% if image_position == 'right' %}meet-team-reverse{% endif %} {% if stack_on_mobile %}meet-team-stack-mobile{% endif %}" 
         style="gap: {{ column_gap }}px;">
      
      {% if team_image != blank %}
        <div class="meet-team-image-wrapper">
          <img src="{{ team_image | image_url: width: 1200, height: 800 }}" 
               alt="{{ heading | escape }}"
               class="meet-team-image"
               width="1200"
               height="800"
               loading="lazy"
               style="width: 100%;
                      height: auto;
                      object-fit: {{ image_fit }};
                      border-radius: {{ image_border_radius }}px;
                      display: block;">
        </div>
      {% endif %}
      
      <div class="meet-team-text-wrapper">
        {% if introduction_text != blank %}
          <div class="meet-team-intro" 
               style="color: {{ text_color }};
                      font-size: {{ text_font_size }}px;
                      font-family: {{ text_font_family_value }};
                      line-height: {{ text_line_height }};
                      margin-bottom: {{ text_spacing }}px;">
            {{ introduction_text }}
          </div>
        {% endif %}
        
        {% if quote_text != blank %}
          <div class="meet-team-quote" 
               style="color: {{ quote_color }};
                      font-size: {{ quote_font_size }}px;
                      font-family: {{ text_font_family_value }};
                      font-style: {{ quote_font_style }};
                      line-height: {{ text_line_height }};
                      margin: 0;">
            {{ quote_text }}
          </div>
        {% endif %}
      </div>
      
    </div>
  </div>
</section>

<style>
  .meet-team-section {
    position: relative;
    width: 100%;
  }
  
  .meet-team-heading {
    word-wrap: break-word;
  }
  
  .meet-team-content {
    display: flex;
    align-items: flex-start;
    width: 100%;
  }
  
  .meet-team-reverse {
    flex-direction: row-reverse;
  }
  
  .meet-team-image-wrapper {
    flex: 0 0 50%;
    max-width: 50%;
    min-width: 0;
  }
  
  .meet-team-image {
    width: 100%;
    height: auto;
  }
  
  .meet-team-text-wrapper {
    flex: 0 0 50%;
    max-width: 50%;
    min-width: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  
  .meet-team-intro {
    word-wrap: break-word;
  }
  
  .meet-team-intro p {
    margin-bottom: 1rem;
  }
  
  .meet-team-intro p:last-child {
    margin-bottom: 0;
  }
  
  .meet-team-quote {
    word-wrap: break-word;
  }
  
  .meet-team-quote p {
    margin-bottom: 1rem;
  }
  
  .meet-team-quote p:last-child {
    margin-bottom: 0;
  }
  
  @media (max-width: 767px) {
    .meet-team-content {
      flex-direction: column !important;
    }
    
    .meet-team-image-wrapper,
    .meet-team-text-wrapper {
      flex: 0 0 100% !important;
      max-width: 100% !important;
      width: 100% !important;
    }
    
    .meet-team-image-wrapper {
      margin-bottom: 30px;
    }
    
    .meet-team-text-wrapper {
      width: 100%;
      display: block;
    }
    
    .meet-team-intro,
    .meet-team-quote {
      width: 100%;
      display: block;
    }
  }
</style>

